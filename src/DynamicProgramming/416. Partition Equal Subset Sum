class Solution {
    public boolean canPartition(int[] nums) {
        int total = 0, n = nums.length;
        for (int i : nums) total += i;


        if (total % 2 != 0) return false;
        int target = total / 2;
        Boolean[][] dp = new Boolean[n][target + 1];

        return helper(nums, total, 0, 0, dp);
    }

    public boolean helper(int[] nums, int total, int sum, int idx, Boolean[][] dp) {
        // base case 1
        if (sum == total / 2) return true;
        // base case 2
        if (idx >= nums.length || sum > total / 2) return false;

        if (dp[idx][sum] != null) return dp[idx][sum];

        boolean include = helper(nums, total, sum + nums[idx], idx + 1, dp);
        boolean exclude = helper(nums, total, sum, idx + 1, dp);

        dp[idx][sum] = include || exclude;
        return dp[idx][sum];
    }
}
